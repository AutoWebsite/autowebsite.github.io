<!DOCTYPE html>
<html>
<head>
  <title>Login</title>
  <script src="https://www.google.com/recaptcha/api.js" async defer></script>
</head>
<body>
  <div id="header"></div>

  <h2>Login</h2>

  <button onclick="googleLogin()">Continue with Google</button>

  <div class="g-recaptcha" data-sitekey="6LdF6TUsAAAAAJKdqhEUPhp7MVzf7riGXCEF_e2c"></div>

  <div id="footer"></div>

  <script type="module">
    import { auth, GoogleAuthProvider, signInWithPopup } from "./firebase.js";

    // Load header/footer
    fetch("header.html").then(r => r.text()).then(t => document.getElementById("header").innerHTML = t);
    fetch("footer.html").then(r => r.text()).then(t => document.getElementById("footer").innerHTML = t);

    window.googleLogin = function() {
      const provider = new GoogleAuthProvider();
      signInWithPopup(auth, provider)
        .then(() => {
          window.location.href = "admin.html";
        })
        .catch(err => alert(err.message));
    }
  </script>
</body>
</html>
